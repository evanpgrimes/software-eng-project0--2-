<!DOCTYPE html>
<html lang="en">
<head>
   <link rel="shortcut icon" href="">
    <title>User File Upload</title>
    <link rel="stylesheet" href="main.css">
    <style type="text/css">

    
    </style>
    <script type="text/javascript" src="compareArrays.js"></script>
    <script type="text/javascript" src="answer_key.js"></script>
</head>
<body>
   <h1>Select answer key/file to upload</h1>
        <script type="text/javascript">
                //MOVE TO USER
                //
                //
                //
                //NOTE CSV AND TXT ARE READ IN AS STRING
                var userTextAsString = "";
                var submittedAnswers = [];
                function loadFile(o)
                {
                    var fr = new FileReader();
                    fr.onload = function(e)
                        {
                            //showDataFile(e, o);
                            document.getElementById("data").innerText = e.target.result;
                            converter(e);
                            console.log(JSON.parse(sessionStorage.getItem('Answers'))/*.toString()*/)
                            console.log(typeof(submittedAnswers))
                            var score = compare(JSON.parse(sessionStorage.getItem('Answers')), submittedAnswers)
                window.alert("Your score for this assignment is a " +score.toString())
                        };
                    fr.readAsText(o.files[0]);
                }

                /*function showDataFile(e, o)
                {
                    document.getElementById("data").innerText = e.target.result;
                }
                */
            
                function converter(e){
                    
                    var innerArray = []
                    
                    userTextAsString += e.target.result.split(' ');
                    
                    for(i=0; i<userTextAsString.length; i++){
                        if (userTextAsString.charAt(i) == '~'){
                            submittedAnswers.push(userTextAsString.charAt(i+1))    
                        }
                    }
                    
                    //submittedAnswers.push(innerArray);
                }
                //
                //
                //
                //
                //

            </script>
        <input type="file" accept = ".txt, .csv" onchange="loadFile(this)">
        <pre id="data"></pre>   

        <form method="get" action="login.html">
        <center>
        <button type="submit">Home</button>
        </center>   
</body>

</html>